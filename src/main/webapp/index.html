<!DOCTYPE html>

<html ng-app="govna">

<head>
    <meta charset="utf-8" />
    <title>Third Party Library Governance</title>
    <script>document.write('<base href="' + document.location + '" />');</script>
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/bootstrap-glyphicons.css" />
    <link rel="stylesheet" href="css/app.css" />

    <script type="text/javascript" src="js/angular-1.2.9.js" ></script>
    <script type="text/javascript" src="js/ui-bootstrap-tpls-0.11.2.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
</head>

<body ng-controller="MainCtrl" >

<div ng-style="{'position':'absolute',
                'top':'24px', 'right':'39px',
                'width':'40px', 'height':'40px'}" ng-click="debugIsCollapsed = !debugIsCollapsed"></div>

<div class="container">

    <div class="page-header"><h1 ng-style="{'text-align': 'center'}">Third Party Library Governance</h1></div>


    <!--Finder-->
    <div class="panel panel-success" ng-style="{'width': '70%'}">
        <div class="panel-heading">
            <h3 class="panel-title">Find Group Restrictions</h3>
        </div>
        <div class="panel-body">
            <ng-form >
                <div class="row">
                    <div class="col-sm-5">
                        <div class=row">
                            <input type="search" placeholder="Group name:" size="37" ng-model="groupName"
                                ng-keyup="$event.keyCode == 13 && fetchGroup()"
                                ng-change="clearStuff()"/>
                        </div>
                        <div class="row" style="padding-top: 0px">
                            <span style="padding-left: 20px; font-size: .8em">Wildcard = </span>
                            <span style="font-size: 1.5em"><sub>*</sub></span>
                            <span style="padding-left: 20px; font-size: .8em">(TODO: make this work)</span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <button class="btn btn-default" ng-click="fetchGroup()">
                            <span class="glyphicon glyphicon-search"></span> Find
                        </button>
                        <button class="btn btn-default" ng-click="clearGroup()">
                            <span class="glyphicon glyphicon-remove-circle"></span> Clear
                        </button>
                    </div>
                </div>
            </ng-form>
        </div>
    </div>

    <!--Not Found Message-->
    <div ng-if="notFound">
        <form>{{groupName}} not found:
            <button class="btn btn-default" ng-click="newGroupData()">Create</button>
        </form>
    </div>

    <!--Group Data-->
    <div class="panel panel-primary"
                    ng-if="groupData !== null">

        <form>
            <span ng-style="{'padding' : '50px'}">
                {{groupData.groupName}}
            </span>
            <button ng-click="saveGroupData()">Save</button>
            <button ng-click="deleteGroupData()">Delete</button>
        </form>

        <!--Restrictions-->
        <ul class="nav nav-pills nav-stacked">
            <!--Group restriction-->
            <li class="active">
                <a href="#" ng-click="groupIsCollapsed = !groupIsCollapsed">
                    <span class="badge pull-left">
                        {{groupData.restriction ? 1 : 0}}
                    </span>
                    &nbsp;&nbsp;Group Restriction
                </a>
                <div collapse="groupIsCollapsed">
                    <div ng-include=" ' restriction.html ' "></div>
                </div>
            </li>

            <!--Artifact restriction-->
            <li class="active">
                <a href="#" ng-click="artifactIsCollapsed = !artifactIsCollapsed">
                    <span class="badge pull-left">
                        {{groupData.artifactRestrictions ? groupData.artifactRestrictions.length : 0}}
                    </span>
                    &nbsp;&nbsp;Artifact Restrictions
                </a>
                <div collapse="artifactIsCollapsed">
                    <div class="well well-sm">artifs</div>
                </div>
            </li>
            <!--Version Restriction-->
            <li class="active">
                <a href="#" ng-click="versionIsCollapsed = !versionIsCollapsed">
                    <span class="badge pull-left">
                        {{groupData.versionRestrictions ? groupData.versionRestrictions.length : 0}}
                    </span>
                    &nbsp;&nbsp;Version Restrictions
                </a>
                <div collapse="versionIsCollapsed">
                    <div ng-include=" ' version.html ' "
                         onload="context='version'"></div>
                </div>
            </li>
            <!--Artifact version restriction-->
            <li class="active">
                <a href="#" ng-click="artifactVersionIsCollapsed = !artifactVersionIsCollapsed">
                    <span class="badge pull-left">
                        {{groupData.artifactVersionRestrictions ? groupData.artifactVersionRestrictions.length : 0}}
                    </span>
                    &nbsp;&nbsp;Artifact Version Restrictions
                </a>
                <div collapse="artifactVersionIsCollapsed">
                    <div class="well well-sm">artifact versions</div>
                </div>
            </li>

        </ul>
    </div>

    <!--Status message-->
    <br>
    <alert ng-if="message != null">{{message}}</alert>

    <!--Debugging-->
    <div collapse="debugIsCollapsed" style="background-color: #EFEFEF; padding: 12px">
        <div>Full JSON  ...... Click the monocle to show hide<br>{{groupData}}<br><br></div>
        <div>Group restriction<br>{{groupData.restriction}}<br><br></div>
        <div>Artifact restriction<br>{{groupData.artifactRestrictions}}<br><br></div>
        <div>Version restriction<br>{{groupData.versionRestrictions}}<br><br></div>
        <div>Artifact version restriction<br>{{groupData.artifactVersionRestrictions}}<br><br></div>
    </div>



</div>

</body>

</html>
